# Java_deeplay_task

Тестовое задание для отбра на стажировку в Deeplay по направлению Java.

## Задание

Вам нужно написать метод.
На вход приходят следующие параметры:
- строка, длинной 16 символов, описывающая клетки игрового поля 4*4.
- строка, содержащая расу существа.

Ваш метод должен возвращать минимальные затраты
существа на перемещения из стартовой позиции (левый верхний угол)
в конечную (правый нижний угол).

Перемещение происходит по следующим правилам:
- существо может перемещаться только вверх/вниз и влево/вправо;
- стоимость перемещения по клеткам зависит от типа клетки
и от расы существа в соответствии с таблицей ниже.

ТАБЛИЦА СТОИМОСТИ ПЕРЕМЕЩЕНИЯ СУЩЕСТВ ПО РАЗЛИЧНЫМ ТИПАМ КЛЕТОК:

|               |  Болото  |  Вода  |  Кусты  |  Равнина  |
|:--------------|:--------:|:------:|:-------:|:---------:|
| **Человек**   |    5     |   2    |    3    |     1     |
| **Болотник**  |    2     |   2    |    5    |     2     |
| **Леший**     |    3     |   3    |    2    |     2     |

Кодирование типа игровых клеток:

- Болото - "S"
- Вода - "W"
- Кусты - "T"
- Равнина - "P"

Кодирование существ:

- Человек - "Human"
- Болотник - "Swamper"
- Леший - "Woodman"

ПРИМЕР ВХОДНЫХ И ВЫХОДНЫХ ДАННЫХ:

"STWSWTPPTPTTPWPP"

"Human"

Выходные данные - 10

![Кратчайший путь для данных из примера](pics/2022-06-09_17-40.png)


## Решение

### Стадии

1. Считать изфайлов все входные данные(строка с полем мира,
вид существа, таблица стоимости перемещений всех существ).
2. Получить таблицу стоимости перемещений для конкретного существа
(заданного во входных данных) по таблице стоимости перемещений всех существ.
3. Найти кратчайший путь прямым ходом алгоритма Дейкстры(обратный ход не нужен, т.к.
нас интересует только его стоимость, а не множество посещенных вершин).

#### Замечания по третьей стадии

Заметим что "таблица стоимости перемещений для конкретного существа"
(получаемая после второй стадии) описывает стоимость перехода в вершину(ячейка в таблице)
из любой сосоедней. Т.е. данныая таблица не стандартно описывает 
односторонний взвешенный мультиграф.

Для поиска кратчайшего пути логично использовать один из алгоритмов, предназначенных для этого.
Эффективным решением будет использовать алгоритм Дейкстры. Но для стандартной реализации алгоритма
Дейкстры необходимо иметь матрицу(размером 16x16 ячеек, т.к. по условию задания имеем 16 клеток игрового поля) смежности взвешенного графа. 

Однако, для игрового поля 4x4 с начальной точкой в верхнем левом углу
и конечной точкой в нижнем правом углу движение вверх и влево не эффективно(т.к. при любом движении
в направлении начальной точки по любой из координат образуется соседняя посещенная точка, т.е.
петля, следовательно цена пути до конечной точки увеличивается). 

Для поля большей размерности кратчайший путь может содержать движения вверх и влево. В случае
поля 4x4 мы будем рассматривать только движение внихз и вправо.

### Стадия 1 (чтение данных из  файлов)

Входные файлы приложения расположены в двух каталогах `"src/main/resources/areas"` и `"src/main/resources/tables"`.


В `"src/main/resotces/areas"` содержатся текстовые файлы c информацией о поле и виде существа.

Содержимое файла ["src/main/resotces/areas/1.txt"](src/main/resources/areas/1.txt):
```text
STWSWTPPTPTTPWPP
Human
```

В `"src/main/resources/tables"` содержатся текстовые файлы с таблицами стоимости перемещения
существ по различным типам клеток.

Содержимое файла ["src/main/resotces/tables/1.txt"](src/main/resources/tables/1.txt):
```text
5 2 3 1
2 2 5 2
3 3 2 2
```
Таблица тот же формат что и в описании задачи, только без заголовков столбцов и строк, значения разделяются пробелом.

Для чтения файлов используется метод `getMatrix()` от объектов классов `AreaRaceReader`(для чтения 
данных из `"src/main/resotces/areas"`) и `TableReader`(для чтения
данных из `"src/main/resotces/tables"`). В конструкторы каждого из этих классов передается путь
до файла в катологе `resource`. Метод `getMatrix()` возвращает матрицу 4x4. 

```java
TableReader tableReader = new TableReader("tables/1.txt");
```

### Стадия 2 (получение таблицы стоимости перемещений для конкретного существа)

На данном этапе мы хотим из таблицы вида получить таблицу
Которая нам нужна для "упрощенного" алгоритма Дейкстры.

Для получения нужной таблицы используется объект класса `AreaPriceCalculator`. 
Его метод `getMatrix()` возвращиет искомую таблицу.

### Стадия 3 (поиск кратчайшего пути)

Мы будем хранить цену кратчайшего пути до каждой ячейки в таблице размерном 4x4.

Изначально стартовая ячейка имеет значение `0`(т.к. по условию задания переход на нее не входит в затраты),
а остальные имеют значение `∞`(Integer.MAX_VALUE).

Посещая каждую ячейку(кроме конечной ячейки) начиная со стартовой расчитывем стоимость пути до ее правого и нижнего соседа.
Если полученные значения нового пути меньше ранее записанного, то записываем меньшее в ячейку этого соседа.
После всех ячеек в финальной ячейке(правый нижний угол) будет записано значение кратчайшего пути.


Метод `simpleDijkstra(int[][] matrix)` класса `Solution` возвращает кратчайший путь.

### Результаты

Для данных из примера алгоритм выдает верные значения.

Краттчайшие пути:

- для человека("Human") - 10
- для болотника("Swamper") - 15
- для лешего("Woodman") - 12



